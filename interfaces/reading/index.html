<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<!-- Your interface name here-->
	<title></title>
	<!-- The description of this interfaces here -->
	<meta name="description" content="">
	<!-- Your CSS here -->
  	<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

  	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script src="nutella_lib.js" type="text/javascript"></script>
	<style>
		body {
	    	font-family: "Arial";
		}
	</style>

	<script type="text/javascript">

	// Parse the query parameters
	var query_parameters = NUTELLA.parseURLParameters();

	// Get an instance of nutella. 
	var nutella = NUTELLA.init(query_parameters.broker, query_parameters.app_id, query_parameters.run_id, NUTELLA.parseComponentId());

	nutella.net.subscribe("room_config_update", function(m){
		location.reload(true);
	});

    $(function() {

		nutella.net.request("room_configuration", undefined, function(configuration) {
			$('#submit').click(function(){
				var seismograph = $('#seismograph option:selected').val();
				var distance = document.getElementById("distance").value;
				// var distance = $('#distance').text();
				if (seismograph == 0){
					alert ('Please select the seismograph for your reading');
					return;
				}
				if (isNaN(distance) || distance < 0 || distance == ""){
					alert ('Distances must be positive numbers');
					return;
				}

				nutella.net.publish("reading",{seismograph:seismograph,distance:distance});
			});


	    });
	});

    </script>

</head>
<body>
Seismograph: <select id="seismograph">
	<option value=0></option>
	<option value=1>1</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5</option>
</select>
Epicenter distance: <input type=text id="distance" size=6 maxlength=6>
<button id="submit">Submit estimate</button>

</body>
</html>